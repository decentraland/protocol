syntax = "proto3";

import "ecs/components/common/id.proto";
option (ecs_component_id) = 1017;

import "ecs/components/common/Color3.proto";

enum TextureWrapMode {
    Repeat = 0;
    Clamp = 1;
    Mirror = 2;
    MirrorOnce = 3;
}

enum FilterMode
{
    Point = 0;
    Bilinear = 1;
    Trilinear = 2;
}

enum TransparencyMode
{
    Opaque = 0;
    AlphaTest = 1;
    AlphaBlend = 2;
    AlphaTestAndAlphaBlend = 3;
    Auto = 4;
}

message PBMaterial {  
    message Texture {
        string src = 1;
        optional TextureWrapMode wrapMode = 2; // default = TextureWrapMode.Clamp
        optional FilterMode filterMode = 3; // default = FilterMode.Bilinear
    }

    message AvatarTexture {
        string userId = 1;
        optional TextureWrapMode wrapMode = 2; // default = TextureWrapMode.Clamp
        optional FilterMode filterMode = 3; // default = FilterMode.Bilinear
    }

    oneof texture {
        Texture texture = 1; // default = null
        AvatarTexture avatarTexture = 2; // default = null
    }
    
    optional float alphaTest = 1; // default = 0.5. range value: from 0 to 1
    optional bool castShadows = 2; // default =  true

    optional Texture alphaTexture = 3; // default = null
    optional Texture emissiveTexture = 4; // default = null
    optional Texture bumpTexture = 5; // default = null

    optional Color3 albedoColor = 6; // default = white;
    optional Color3 emissiveColor = 7; // default = black;
    optional Color3 reflectivityColor = 8; // default = white;

    optional TransparencyMode transparencyMode = 9; // default = TransparencyMode.Auto

    optional float metallic = 10; // default = 0.5
    optional float roughness = 11; // default = 0.5
    optional float glossiness = 12; // default = 1

    optional float specularIntensity = 13; // default = 1
    optional float emissiveIntensity = 14; // default = 2
    optional float directIntensity = 15; // default = 1
}
