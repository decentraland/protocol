syntax = "proto3";
package decentraland.social_service.v3;

// Errors
message InternalServerError {
  optional string message = 1;
}
message InvalidRequest {
  optional string message = 1;
}

// Common types
message User { string address = 1; }

message Friend {
  string address = 1;
  optional string name = 2;
  optional bool has_claimed_name = 3;
  optional string profile_picture_url = 4;
}

message Pagination {
  int32 limit = 1;
  int32 offset = 2;
}

message PaginatedResponse {
  int32 total = 1;
  int32 page = 2;
}

// Get mutual friends
message GetMutualFriendsPayload {
  User user = 1;
  optional Pagination pagination = 2;
}

message GetMutualFriendsResponse {
  message Ok {
    repeated Friend friends = 1;
    PaginatedResponse pagination_data = 2;
  }

  oneof response {
    Ok ok = 1;
    InternalServerError internal_server_error = 2;
    InvalidRequest invalid_request = 3;
  }
}

service SocialServiceV2 {
  rpc GetMutualFriends(GetMutualFriendsPayload) returns (GetMutualFriendsResponse) {}
}
