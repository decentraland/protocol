syntax = "proto3";
package decentraland.bff;

import "google/protobuf/empty.proto";

enum Reason {
  REASON_UNDEFINED = 0;
  REASON_ROUTE_CUT = 1;
  REASON_NO_ROUTE = 2;
}

message Packet {
  string source = 1; // address
  bytes payload = 3;
}

message Request {
  repeated string peers = 1;
  Packet packet = 2;
  Reason reason = 3;
}

service MessagingService {
  rpc Publish(Request) returns (google.protobuf.Empty) {}
  rpc Read(google.protobuf.Empty) returns (stream Packet) {}
}
