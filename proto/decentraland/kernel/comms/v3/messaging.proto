syntax = "proto3";

package decentraland.kernel.comms.v3;

message ChallengeRequired {
  string challenge_to_sign = 1;
}

message SignedChallenge {
  string auth_chain_json = 1;
}

message MessageRequest {
  repeated string targets = 1;
  bytes payload = 2;
}

message SubscribeRequest {
  string topic = 1;
}

message PublishRequest {
  string topic = 1;
  bytes payload = 2;
}

message UnsubscribeRequest {
  string topic = 1;
}

message ServerMessage {
  oneof message {
    ChallengeRequired challenge_required = 1;
    bytes relayed_message = 2;
  }
}

message ClientMessage {
  oneof message {
    SignedChallenge signed_challege = 1;
    MessageRequest message_request = 2;
    SubscribeRequest subscribe_request = 3;
    UnsubscribeRequest unsubscribe_request = 4;
    PublishRequest publish_request = 5;
  }
}
